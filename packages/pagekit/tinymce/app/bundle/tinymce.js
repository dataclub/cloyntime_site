!function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){Editor.components["editor-html"]=i(1),Editor.components["plugin-link"]=i(3),Editor.components["plugin-image"]=i(2),Editor.components["plugin-video"]=i(4)},function(t,e){t.exports={data:function(){return{plugins:[]}},created:function(){var t=$tinymce.root_url+"/app/assets/tinymce",e=this;this.$parent.editor=this,this.$asset({js:[t+"/tinymce.jquery.min.js"]}).then(function(){this.$emit("ready"),tinyMCE.baseURL=t,tinyMCE.suffix=".min",this.$parent.editor=tinyMCE.init(_.merge({height:this.$parent.height-108,mode:"exact",plugins:[e.plugins,"advlist autolink lists charmap print preview hr anchor media","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime nonbreaking save table contextmenu directionality","paste textcolor colorpicker textpattern imagetools"],toolbar:"undo redo | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | code | fullscreen",document_base_url:Vue.url.options.root+"/",elements:[this.$parent.$els.editor],element_format:"html",entity_encoding:"raw",init_instance_callback:function(t){e.tiny=t;var i=function(t){this.tiny.setContent(t||"",{format:"text"})},n=e.$watch("$parent.value",i,{immediate:!0});t.on("change",function(){n(),e.$parent.value=t.getContent(),n=e.$watch("$parent.value",i)}),t.on("undo",function(){t.fire("change")}),t.on("redo",function(){t.fire("change")})},save_onsavecallback:function(){if(e.$parent.$els.editor.form){var t=document.createEvent("HTMLEvents");t.initEvent("submit",!0,!1),e.$parent.$els.editor.form.dispatchEvent(t)}}},$tinymce))})}}},function(t,e){t.exports={plugin:!0,created:function(){if("undefined"!=typeof tinyMCE){var t=this;this.$parent.editor.plugins.push("-pagekitImage"),tinyMCE.PluginManager.add("pagekitImage",function(e){var i=function(){var i=e.selection.getNode();if("IMG"===i.nodeName){e.selection.select(i);var n={src:i.attributes.src.nodeValue,alt:i.attributes.alt.nodeValue}}else n={};new t.$parent.$options.utils["image-picker"]({parent:t,data:{image:{data:n}}}).$mount().$appendTo("body").$on("select",function(t){i.setAttribute("src",""),i.setAttribute("alt","");var n=Object.keys(i.attributes).reduce(function(e,n){var a=i.attributes[n].name;return"data-mce-src"===a?e:e+" "+a+'="'+(t.data[a]||i.attributes[n].nodeValue)+'"'},"");e.selection.setContent("<img"+n+">"),e.fire("change")})};e.addButton("image",{tooltip:"Insert/edit image",onclick:i,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{text:"Insert/edit image",icon:"image",context:"insert",onclick:i})})}}}},function(t,e){t.exports={plugin:!0,created:function(){if("undefined"!=typeof tinyMCE){var t=this;this.$parent.editor.plugins.push("-pagekitLink"),tinyMCE.PluginManager.add("pagekitLink",function(e){var i=function(){var i=e.selection.getNode();if("A"===i.nodeName){e.selection.select(i);var n={link:i.attributes.href?i.attributes.href.nodeValue:"",txt:i.innerHTML}}else n={};new t.$parent.$options.utils["link-picker"]({parent:t,data:{link:n}}).$mount().$appendTo("body").$on("select",function(t){i.setAttribute("href","");var n=Object.keys(i.attributes).reduce(function(e,n){var a=i.attributes[n].name;return"data-mce-href"===a?e:e+" "+a+'="'+("href"===a?t.link:i.attributes[n].nodeValue)+'"'},"");e.selection.setContent("<a"+n+">"+t.txt+"</a>"),e.fire("change")})};e.addButton("link",{tooltip:"Insert/edit link",onclick:i,stateSelector:"a"}),e.addMenuItem("link",{text:"Insert/edit link",icon:"link",context:"insert",onclick:i})})}}}},function(t,e){t.exports={plugin:!0,created:function(){if("undefined"!=typeof tinyMCE){var t=this;this.$parent.editor.plugins.push("media"),this.$parent.editor.plugins.push("-pagekitVideo"),tinyMCE.PluginManager.add("pagekitVideo",function(e){var i=function(){var i,n,a={},o=e.selection.getNode(),r={};"IMG"===o.nodeName&&o.hasAttribute("data-mce-object")?(e.selection.select(o),Object.keys(o.attributes).forEach(function(t){var e=o.attributes[t].name;("width"===e||"height"===e||(e=e.match(/data-mce-p-(.*)/))&&(e=e[1]))&&(r[e]=""===o.attributes[t].nodeValue||o.attributes[t].nodeValue)})):"SPAN"===o.nodeName&&o.hasAttribute("data-mce-object")&&(o=o.firstChild)&&(n=o.getAttribute("src"),n=n.split("?"),i=n[1],n=n[0],String(i).split("&").forEach(function(t){t=t.split("="),r[t[0]]=t[1]}),r.src=n,r.width=o.getAttribute("width"),r.height=o.getAttribute("height"),Object.keys(o.attributes).forEach(function(t){var e=o.attributes[t].name;"src"!==e&&"width"!==e&&"height"!==e&&(a[e]=o.attributes[t].nodeValue)}));var c=new t.$parent.$options.utils["video-picker"]({parent:t,data:function(){return{video:{data:r}}}}).$mount().$appendTo("body").$on("select",function(t){var i,n,o;delete t.data.playlist,(o=c.isYoutube)?(n="https://www.youtube.com/embed/"+o[1]+"?",t.data.loop&&(t.data.playlist=o[1])):(o=c.isVimeo)&&(n="https://player.vimeo.com/video/"+o[3]+"?"),n?(Object.keys(t.data).forEach(function(e){"src"!==e&&"width"!==e&&"height"!==e&&(n+=e+"="+(_.isBoolean(t.data[e])?Number(t.data[e]):t.data[e])+"&")}),a.src=n.slice(0,-1),a.width=t.data.width||690,a.height=t.data.height||390,a.allowfullscreen=!0,i="<iframe",Object.keys(a).forEach(function(t){i+=" "+t+(_.isBoolean(a[t])?"":'="'+a[t]+'"')}),i+="></iframe>"):(i="<video",Object.keys(t.data).forEach(function(e){var n=t.data[e];n&&(i+=" "+e+(_.isBoolean(n)?"":'="'+n+'"'))}),i+="></video>"),e.selection.setContent(""),e.insertContent(i),e.fire("change")})};e.addButton("media",{tooltip:"Insert/edit video",onclick:i,stateSelector:["img[data-mce-object]","span[data-mce-object]"]}),e.addMenuItem("media",{text:"Insert/edit video",icon:"media",context:"insert",onclick:i})})}}}}]);